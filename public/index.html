<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoomPrivate - Secure Chat</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div id="join-container">
            <h1>RoomPrivate</h1>
            <div class="form-group">
                <button id="create-room-btn">Create New Room</button>
                <button id="join-room-btn">Join Existing Room</button>
            </div>
        </div>

        <div id="create-room-container" class="hidden">
            <h2>Create New Room</h2>
            <div id="create-room-form">
                <div class="form-group">
                    <input type="text" id="create-username" placeholder="Your username" required>
                </div>
                <div class="form-group">
                    <textarea id="room-description" placeholder="Room description (optional)" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label>Max Members (0 for unlimited)</label>
                    <input type="number" id="room-max-members" value="0" min="0" max="100">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="room-password-toggle">
                        Protect room with password
                    </label>
                </div>
                <div class="form-group hidden" id="room-password-group">
                    <input type="password" id="room-password" placeholder="Enter room password">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="persistent-id-toggle">
                        Use persistent ID
                    </label>
                    <input type="password" id="persistent-key" class="hidden" placeholder="Your secret key for persistent ID">
                    <small class="help-text hidden" id="persistent-key-help">This key will allow you to maintain the same ID across sessions</small>
                </div>
                <div class="form-group">
                    <button id="create-room-submit">Create Room</button>
                    <button class="back-btn">Back</button>
                </div>
            </div>
        </div>

        <div id="join-room-form" class="hidden">
            <h2>Join Room</h2>
            <div class="form-group">
                <input type="text" id="username" placeholder="Enter username" required>
            </div>
            <div class="form-group">
                <input type="text" id="room-id" placeholder="Enter room ID" required>
            </div>
            <div class="form-group">
                <input type="password" id="join-room-password" placeholder="Room password (if required)">
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="join-persistent-id-toggle">
                    Use persistent ID
                </label>
                <input type="password" id="join-persistent-key" class="hidden" placeholder="Your secret key for persistent ID">
                <small class="help-text hidden" id="join-persistent-key-help">Use the same key to maintain your identity</small>
            </div>
            <div class="form-group">
                <button id="join-room-submit">Join</button>
                <button class="back-btn">Back</button>
            </div>
        </div>

        <div id="chat-container" class="hidden">
            <div id="chat-header">
                <div class="room-info">
                    <h2>Room: <span id="room-name-display"></span></h2>
                    <small id="room-id-display"></small>
                    <p id="room-description-display" class="description"></p>
                    <small id="room-members-count"></small>
                </div>
                <button id="leave-room">Leave Room</button>
            </div>
            <div class="chat-content">
                <div id="messages"></div>
                <div id="members-list">
                    <h3>Members</h3>
                    <ul id="members"></ul>
                </div>
            </div>
            <div id="input-container">
                <input type="text" id="message-input" placeholder="Type your message...">
                <button id="send-message">Send</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
